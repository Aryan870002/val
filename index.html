<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Valentine Moment</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600&family=Nunito:wght@400;700&family=Sacramento&display=swap" rel="stylesheet">
    <style>
        /* --- CSS STYLES --- */
        :root {
            --bg-color: #ffe6f0;
            --primary-color: #ff6b9d;
            --accent-color: #ff99c2;
            --text-color: #593040;
            --card-bg: #fff0f6;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow: hidden; /* Prevent scrolling, controlled by JS */
            height: 100vh;
            width: 100vw;
            position: relative;
        }

        h1, h2 { font-family: 'Fredoka', sans-serif; color: var(--primary-color); }
        .cursive { font-family: 'Sacramento', cursive; }

        /* --- UTILITIES --- */
        .hidden { display: none !important; }
        .btn {
            background: var(--primary-color);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-family: 'Fredoka', sans-serif;
            margin-top: 20px;
        }
        .btn:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(255, 107, 157, 0.4); }

        /* --- SCREEN CONTAINERS --- */
        .screen {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease-in-out;
            padding: 20px;
            text-align: center;
        }
        .screen.active { opacity: 1; pointer-events: all; z-index: 10; }

        /* --- 1. LOADING SCREEN --- */
        #loading-screen { z-index: 100; background: var(--bg-color); }
        .loader-gif { width: 150px; margin-bottom: 20px; } /* Placeholder for Kirby */
        .loading-bar {
            width: 200px; height: 10px;
            background: rgba(255,255,255,0.5);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 15px;
        }
        .progress {
            width: 0%; height: 100%;
            background: var(--primary-color);
            transition: width 3s linear;
        }

        /* --- 2. HERO SCREEN --- */
        .hero-title { font-size: 3rem; margin-bottom: 30px; line-height: 1.2; }
        .start-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.2);
            max-width: 400px;
        }

        /* --- 3. ENVELOPE SCREEN --- */
        .envelope-container {
            position: relative;
            width: 300px; height: 200px;
            background: #ff85b3;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s;
            margin: 20px auto;
        }
        .envelope-container:hover { transform: scale(1.02); }
        .flap {
            position: absolute; top: 0; left: 0;
            width: 0; height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 100px solid #ff5c93;
            transform-origin: top;
            transition: transform 0.6s;
            z-index: 2;
        }
        .envelope-container.open .flap { transform: rotateX(180deg); }
        .letter {
            position: absolute;
            bottom: 0;
            width: 260px; height: 280px;
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 -5px 10px rgba(0,0,0,0.1);
            transition: bottom 0.6s, transform 0.6s;
            z-index: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            font-size: 0.9rem;
            color: #444;
        }
        .envelope-container.open .letter {
            bottom: 50px;
            transform: translateY(-20px);
            z-index: 3;
        }

        /* --- 4. MUSIC SCREEN --- */
        .cassette {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin: 10px;
            width: 300px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 2px solid #eee;
        }
        .cassette.active { border-color: var(--primary-color); background: #fff5f9; }
        .play-btn {
            width: 40px; height: 40px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: white; cursor: pointer;
        }

        /* --- 5. MEMORY GAME --- */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        .card {
            width: 60px; height: 60px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem;
            color: transparent;
            transition: transform 0.3s, background 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .card.flipped {
            background: var(--primary-color);
            color: white;
            transform: rotateY(180deg);
        }
        .card.matched { background: #88ddaa; color: white; cursor: default; }

        /* --- 6. GALLERY --- */
        .gallery-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        .polaroid {
            background: white;
            padding: 10px 10px 30px 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: rotate(-3deg);
            width: 120px;
        }
        .polaroid:nth-child(2) { transform: rotate(4deg); }
        .polaroid:nth-child(3) { transform: rotate(-2deg); }
        .polaroid img { width: 100%; border-radius: 4px; }
        .polaroid p { margin-top: 10px; font-size: 0.7rem; color: #666; font-family: 'Sacramento', cursive; }

        /* --- 7. REASONS --- */
        .reasons-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            max-width: 500px;
        }
        .reason-card {
            background: white;
            padding: 15px;
            border-radius: 12px;
            font-size: 0.8rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .reason-card h4 { color: var(--primary-color); margin-bottom: 5px; }
        
        /* Floating Hearts Animation Background */
        .bg-hearts {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; overflow: hidden;
        }
        .heart {
            position: absolute;
            color: rgba(255, 107, 157, 0.3);
            animation: float 10s infinite linear;
        }
        @keyframes float {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

    </style>
</head>
<body>

    <div class="bg-hearts" id="bg-hearts"></div>

    <div id="loading-screen" class="screen active">
        <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbXN5eGh5cnduMTV3anR4Y2Z5eWJ5eWx5eWJ5eWx5eWJ5eWx5eWJ5eSZlcD12MV9zdGlja2VyX3NlYXJjaCZjdD1z/LpDmM2wStDUsxLgD8z/giphy.gif" alt="Cute loading" class="loader-gif">
        <h2 class="cursive">A Valentine Moment</h2>
        <p style="font-size: 0.8rem; opacity: 0.7;">is being prepared for you...</p>
        <div class="loading-bar"><div class="progress" id="progress-bar"></div></div>
    </div>

    <div id="hero-screen" class="screen">
        <p class="cursive">Hey, I have made something special for you...</p>
        <h1 class="hero-title">Will You Be My<br>Valentine? üíò</h1>
        <div class="start-card">
            <p>A little reminder of what this day feels like with you.</p>
            <p style="font-size: 0.8rem; margin-top: 10px; color: #888;">Tap below when you're ready</p>
            <button class="btn" onclick="nextScreen('envelope-screen')">Open This ‚ûú</button>
        </div>
    </div>

    <div id="envelope-screen" class="screen">
        <h2 class="cursive">Just because today feels right</h2>
        <h1>A Valentine Note üíå</h1>
        
        <div class="envelope-container" onclick="toggleEnvelope()">
            <div class="flap"></div>
            <div class="letter">
                <p><strong>Hey,</strong></p>
                <p>I wanted to do something special today. You bring so much calm and positivity into my world. I appreciate your honesty, kindness, and the way you show up as yourself.</p>
                <p class="cursive" style="text-align: right; margin-top: 10px;">Always ‚ù§Ô∏è</p>
            </div>
        </div>
        <p style="font-size: 0.8rem; margin-top: 20px;">(Click the envelope to read)</p>
        <button class="btn hidden" id="envelope-next-btn" onclick="nextScreen('music-screen')">Keep Going ‚ûú</button>
    </div>

    <div id="music-screen" class="screen">
        <p class="cursive">Hope they make you smile</p>
        <h1>Songs That Feel Like Us üéµ</h1>
        
        <div class="cassette" onclick="toggleMusic(this)">
            <div>
                <h4>Waalian</h4>
                <p style="font-size: 0.7rem;">Some feelings feel calm and deep</p>
            </div>
            <div class="play-btn">‚ñ∂</div>
        </div>
        <div class="cassette" onclick="toggleMusic(this)">
            <div>
                <h4>Lag Jaa Gale</h4>
                <p style="font-size: 0.7rem;">Because closeness matters</p>
            </div>
            <div class="play-btn">‚ñ∂</div>
        </div>
        <div class="cassette" onclick="toggleMusic(this)">
            <div>
                <h4>Bilionera</h4>
                <p style="font-size: 0.7rem;">When emotions say more than words</p>
            </div>
            <div class="play-btn">‚ñ∂</div>
        </div>

        <button class="btn" onclick="nextScreen('game-screen')">Next ‚ûú</button>
    </div>

    <div id="game-screen" class="screen">
        <p class="cursive">A little fun for today</p>
        <h1>Valentine Memory Match</h1>
        <div style="display: flex; gap: 20px; margin-bottom: 10px;">
            <div>Moves: <span id="moves">0</span></div>
            <div>Matched: <span id="matches">0</span>/6</div>
        </div>
        <div class="game-grid" id="game-grid">
            </div>
        <button class="btn hidden" id="game-next-btn" onclick="nextScreen('gallery-screen')">Next ‚ûú</button>
    </div>

    <div id="gallery-screen" class="screen">
        <p class="cursive">The kind that matter</p>
        <h1>Some Random Thoughts</h1>
        <div class="gallery-grid">
            <div class="polaroid">
                <img src="https://placekitten.com/200/200" alt="Cat">
                <p>Us? ü•∫</p>
            </div>
            <div class="polaroid">
                <img src="https://placekitten.com/201/200" alt="Flowers">
                <p>She brought you flowers üå∏</p>
            </div>
            <div class="polaroid">
                <img src="https://placekitten.com/202/200" alt="Cute">
                <p>Extra surprises üéÅ</p>
            </div>
        </div>
        <button class="btn" onclick="nextScreen('reasons-screen')">Next ‚ûú</button>
    </div>

    <div id="reasons-screen" class="screen">
        <p class="cursive">Especially today</p>
        <h1>Why You Matter</h1>
        <div class="reasons-grid">
            <div class="reason-card">
                <h4>Genuine Heart üíñ</h4>
                <p>You care in ways that feel real and unforced.</p>
            </div>
            <div class="reason-card">
                <h4>Calm Presence üçÉ</h4>
                <p>Being with you feels peaceful and grounding.</p>
            </div>
            <div class="reason-card">
                <h4>Kind Nature üå∏</h4>
                <p>Your kindness shows up naturally.</p>
            </div>
            <div class="reason-card">
                <h4>Just You ‚ú®</h4>
                <p>Authentic, honest, and quietly special.</p>
            </div>
        </div>
        <button class="btn" onclick="nextScreen('final-screen')">Next ‚ûú</button>
    </div>

    <div id="final-screen" class="screen">
        <p class="cursive">The grand finale...</p>
        <h1>One Last Thought</h1>
        <div class="start-card">
            <h3>Happy Valentine's Day! ‚ù§Ô∏è</h3>
            <p>This wasn't about perfection, just honesty.</p>
            <p>I wanted you to feel appreciated today.</p>
            <p>Whatever comes next, I'm glad this moment exists.</p>
            <button class="btn" onclick="alert('Sent with love! üíå')">Seal It üíå</button>
            <p style="margin-top: 10px; font-size: 0.8rem; cursor: pointer;" onclick="location.reload()">Restart</p>
        </div>
    </div>

    <script>
        // --- LOGIC ---

        // 1. Loading Screen
        window.onload = () => {
            const bar = document.getElementById('progress-bar');
            bar.style.width = '100%';
            setTimeout(() => {
                nextScreen('hero-screen');
            }, 3500); // 3.5 seconds load time
            createHearts();
        };

        // Navigation
        function nextScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // 2. Envelope Logic
        function toggleEnvelope() {
            const env = document.querySelector('.envelope-container');
            env.classList.toggle('open');
            // Show next button after opening
            if(env.classList.contains('open')) {
                setTimeout(() => {
                    document.getElementById('envelope-next-btn').classList.remove('hidden');
                }, 1000);
            }
        }

        // 3. Music Logic (UI Only)
        function toggleMusic(element) {
            document.querySelectorAll('.cassette').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.play-btn').forEach(b => b.textContent = '‚ñ∂');
            
            element.classList.add('active');
            element.querySelector('.play-btn').textContent = '‚è∏';
        }

        // 4. Memory Game Logic
        const emojis = ['üåπ', 'üç´', 'üß∏', 'üíå', 'üíç', 'üéÄ'];
        let gameCards = [...emojis, ...emojis]; // Pairs
        let flippedCards = [];
        let matchedPairs = 0;
        let moves = 0;

        // Shuffle
        gameCards.sort(() => 0.5 - Math.random());

        const grid = document.getElementById('game-grid');
        gameCards.forEach((emoji, index) => {
            const card = document.createElement('div');
            card.classList.add('card');
            card.dataset.value = emoji;
            card.dataset.index = index;
            card.innerText = emoji; 
            card.onclick = () => flipCard(card);
            grid.appendChild(card);
        });

        function flipCard(card) {
            if (flippedCards.length < 2 && !card.classList.contains('flipped') && !card.classList.contains('matched')) {
                card.classList.add('flipped');
                flippedCards.push(card);
                
                if (flippedCards.length === 2) {
                    moves++;
                    document.getElementById('moves').innerText = moves;
                    checkMatch();
                }
            }
        }

        function checkMatch() {
            const [c1, c2] = flippedCards;
            if (c1.dataset.value === c2.dataset.value) {
                c1.classList.add('matched');
                c2.classList.add('matched');
                matchedPairs++;
                document.getElementById('matches').innerText = matchedPairs;
                flippedCards = [];
                if (matchedPairs === 6) {
                    document.getElementById('game-next-btn').classList.remove('hidden');
                }
            } else {
                setTimeout(() => {
                    c1.classList.remove('flipped');
                    c2.classList.remove('flipped');
                    flippedCards = [];
                }, 1000);
            }
        }

        // Background Hearts
        function createHearts() {
            const bg = document.getElementById('bg-hearts');
            for(let i=0; i<20; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.innerText = Math.random() > 0.5 ? '‚ù§Ô∏è' : 'üå∏';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = Math.random() * 5 + 5 + 's';
                heart.style.fontSize = Math.random() * 20 + 10 + 'px';
                bg.appendChild(heart);
            }
        }

    </script>
</body>
</html>
